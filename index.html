<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <section id="velocidade">0 m/s</section>
    <script>
        const velocidade = document.getElementById("velocidade")
        // Inicializa as variáveis de velocidade para cada eixo
        let velocityX = 0;
        let velocityY = 0;
        let velocityZ = 0;

        // Guarda o timestamp da última leitura
        let lastTime = Date.now();

        // Verifica se o Acelerômetro está disponível
        if ('Accelerometer' in window) {
            // Cria uma nova instância do Acelerômetro
            let accelerometer = new Accelerometer({frequency: 60});
            
            accelerometer.addEventListener('error', event => {
                console.error(`Erro no acelerômetro: ${event.error.name}`);
            });

            // Define o evento de leitura
            accelerometer.addEventListener('reading', e => {
                // Calcula o intervalo de tempo desde a última leitura
                let currentTime = Date.now();
                let deltaTime = (currentTime - lastTime) / 1000; // Converte para segundos
                lastTime = currentTime;

                // Aceleração ajustada (subtrai a aceleração devida à gravidade do eixo Z)
                let ax = accelerometer.x;
                let ay = accelerometer.y;
                let az = accelerometer.z - 9.81;

                // Atualiza a velocidade para cada eixo
                velocityX += ax * deltaTime;
                velocityY += ay * deltaTime;
                velocityZ += az * deltaTime;

                // Calcula a velocidade total combinando os três eixos
                let totalVelocity = Math.sqrt(velocityX**2 + velocityY**2 + velocityZ**2);

                // Exibe a velocidade total
                velocidade.textContent = `${totalVelocity.toFixed(2)} m/s`;
            });

            // Inicia a leitura do acelerômetro
            accelerometer.start();
            console.log(accelerometer)
        } else {
            console.log('Acelerômetro não disponível');
        }
    </script>
</body>
</html>